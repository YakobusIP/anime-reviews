generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Anime {
  id                Int            @id @default(autoincrement())
  malId             Int            @unique
  type              String
  status            String
  rating            String
  season            String?
  title             String
  titleJapanese     String
  titleSynonyms     String
  source            String
  aired             String
  broadcast         String
  episodesCount     Int?
  duration          String
  score             Float?
  images            AnimeImages?
  genres            Genre[]        @relation("AnimeGenres")
  studios           Studio[]
  themes            Theme[]        @relation("AnimeThemes")
  synopsis          String
  trailer           String?
  malUrl            String
  review            String?
  storylineRating   Int?
  qualityRating     Int?
  voiceActingRating Int?
  enjoymentRating   Int?
  personalScore     Int?
  episodes          AnimeEpisode[]
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
}

model AnimeEpisode {
  id            Int     @id @default(autoincrement())
  aired         String
  number        Int
  title         String
  titleJapanese String?
  titleRomaji   String?
  anime         Anime   @relation(fields: [animeId], references: [id])
  animeId       Int
}

model AnimeImages {
  id            Int     @id @default(autoincrement())
  imageUrl      String
  largeImageUrl String?
  smallImageUrl String?
  anime         Anime   @relation(fields: [animeId], references: [id])
  animeId       Int     @unique
}

model Genre {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  animes    Anime[]  @relation("AnimeGenres")
}

model Studio {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  anime     Anime[]
}

model Theme {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  anime     Anime[]  @relation("AnimeThemes")
}
